<h2>Book search</h2>


<%= form_with(url: "/searchbooks", method: "get") do %>
<div class="field">
  <%= label_tag(:text, "Search for:") %>
  <%= text_field_tag(:text) %>
  <br>
  <%= radio_button_tag(:searchby, "title") %>
  <%= label_tag(:title, "Title") %>
  <%= radio_button_tag(:searchby, "author") %>
  <%= label_tag(:author, "Author") %>
  <%= radio_button_tag(:searchby, "published") %>
  <%= label_tag(:published, "Published") %>
  <%= radio_button_tag(:searchby, "category") %>
  <%= label_tag(:category, "Category") %>
  <%= submit_tag("Search") %>
</div>
<% end %>

<% unless @searchedt_books.nil? %>
<table>
<thead>
   <tr>
     <th>Isbn</th>
     <th>Title</th>
     <th>Quantity</th>
     <th>Library</th>
     <th>Language</th>
     <th>Published</th>
     <th>Edition</th>
     <th>Subject</th>
     <th>Summary</th>
     <th colspan="3"></th>
   </tr>
 </thead>
  <tbody>
   <% @searched_books.each do |books| %>
   <% books.each do |book| %>
     <tr>
       <td><%= book.isbn %></td>
       <td><%= book.title %></td>
       <td><%= book.quantity %></td>
       <td><%= book.library_id %></td>
       <td><%= book.language %></td>
       <td><%= book.published %></td>
       <td><%= book.edition %></td>
       <td><%= book.subject %></td>
       <td><%= book.summary %></td>
       <td><%= link_to 'Show', book %></td>
       <td><%= link_to 'Bookmark',  addbookmark_path(:id => book.id) %></td>
       <td><%= link_to 'Unbookmark',  unbookmark_path(:id => book.id) %></td>
       <td><%= link_to 'Checkout', checkout_path(:student_id => current_student.id,:book_id => book.id) %></td>

     </tr>
   <% end %>
   <% end %>
 </tbody>
</table>
<% end %>